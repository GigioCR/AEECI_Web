è5
FC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\Program.cs
var

 
builder

 
=

 
WebApplication

 
.

 
CreateBuilder

 *
(

* +
args

+ /
)

/ 0
;

0 1
var 
connectionString 
= 
builder 
. 
Configuration ,
., -
GetConnectionString- @
(@ A
$strA T
)T U
;U V
builder 
. 
Services 
. 
AddDbContext 
<  
ApplicationDbContext 2
>2 3
(3 4
options4 ;
=>< >
options 
. 
UseSqlServer 
( 
connectionString )
)) *
)* +
;+ ,
builder 
. 
Services 
. 
AddAuthentication "
(" #
options# *
=>+ -
{ 
options 
. %
DefaultAuthenticateScheme %
=& '
JwtBearerDefaults( 9
.9 : 
AuthenticationScheme: N
;N O
options 
. "
DefaultChallengeScheme "
=# $
JwtBearerDefaults% 6
.6 7 
AuthenticationScheme7 K
;K L
} 
) 
. 
AddJwtBearer 
( 
options 
=> 
{ 
options 
.  
RequireHttpsMetadata  
=! "
false# (
;( )
options 
. 
	SaveToken 
= 
true 
; 
options 
. %
TokenValidationParameters %
=& '
new( +%
TokenValidationParameters, E
{ 
ValidateIssuer 
= 
true 
, 
ValidateAudience 
= 
true 
,  
ValidateLifetime 
= 
true 
,  $
ValidateIssuerSigningKey  
=! "
true# '
,' (
ValidIssuer!! 
=!! 
builder!! 
.!! 
Configuration!! +
[!!+ ,
$str!!, @
]!!@ A
,!!A B
ValidAudience"" 
="" 
builder"" 
.""  
Configuration""  -
[""- .
$str"". D
]""D E
,""E F
IssuerSigningKey## 
=## 
new##  
SymmetricSecurityKey## 3
(##3 4
Encoding$$ 
.$$ 
UTF8$$ 
.$$ 
GetBytes$$ "
($$" #
builder$$# *
.$$* +
Configuration$$+ 8
[$$8 9
$str$$9 P
]$$P Q
)$$Q R
)$$R S
}%% 
;%% 
}&& 
)&& 
;&& 
builder(( 
.(( 
Services(( 
.(( 
AddCors(( 
((( 
options((  
=>((! #
{)) 
options** 
.** 
AddDefaultPolicy** 
(** 
policy** #
=>**$ &
{++ 
policy,, 
.--
 
AllowAnyOrigin-- 
(-- 
)-- 
...
 
AllowAnyMethod.. 
(.. 
).. 
.//
 
AllowAnyHeader// 
(// 
)// 
;// 
}00 
)00 
;00 
}11 
)11 
;11 
builder44 
.44 
Services44 
.44 
AddControllers44 
(44  
)44  !
;44! "
builder55 
.55 
Services55 
.55 #
AddEndpointsApiExplorer55 (
(55( )
)55) *
;55* +
builder66 
.66 
Services66 
.66 
AddSwaggerGen66 
(66 
)66  
;66  !
var88 
app88 
=88 	
builder88
 
.88 
Build88 
(88 
)88 
;88 
if:: 
(:: 
app:: 
.:: 
Environment:: 
.:: 
IsDevelopment:: !
(::! "
)::" #
)::# $
{;; 
app<< 
.<< %
UseDeveloperExceptionPage<< !
(<<! "
)<<" #
;<<# $
app== 
.== 

UseSwagger== 
(== 
)== 
;== 
app>> 
.>> 
UseSwaggerUI>> 
(>> 
)>> 
;>> 
}?? 
appAA 
.AA 
UseHttpsRedirectionAA 
(AA 
)AA 
;AA 
appDD 
.DD 
UseExceptionHandlerDD 
(DD 
errorAppDD  
=>DD! #
{EE 
errorAppFF 
.FF 
RunFF 
(FF 
asyncFF 
contextFF 
=>FF !
{GG 
varHH 
featureHH 
=HH 
contextHH 
.HH 
FeaturesHH &
.HH& '
GetHH' *
<HH* +(
IExceptionHandlerPathFeatureHH+ G
>HHG H
(HHH I
)HHI J
;HHJ K
varII 
	exceptionII 
=II 
featureII 
?II  
.II  !
ErrorII! &
;II& '
contextKK 
.KK 
ResponseKK 
.KK 

StatusCodeKK #
=KK$ %
StatusCodesKK& 1
.KK1 2(
Status500InternalServerErrorKK2 N
;KKN O
awaitLL 
contextLL 
.LL 
ResponseLL 
.LL 

WriteAsyncLL )
(LL) *
$strLL* ;
+LL< =
	exceptionLL> G
?LLG H
.LLH I
MessageLLI P
)LLP Q
;LLQ R
}MM 
)MM 
;MM 
}NN 
)NN 
;NN 
appPP 
.PP 
UseCorsPP 
(PP 
)PP 
;PP 
appQQ 
.QQ 
UseStaticFilesQQ 
(QQ 
)QQ 
;QQ 
appRR 
.RR 

UseRoutingRR 
(RR 
)RR 
;RR 
appSS 
.SS 
UseAuthenticationSS 
(SS 
)SS 
;SS 
appTT 
.TT 
UseAuthorizationTT 
(TT 
)TT 
;TT 
appUU 
.UU 
MapControllersUU 
(UU 
)UU 
;UU 
awaitVV 
appVV 	
.VV	 

RunAsyncVV
 
(VV 
)VV 
;VV ‹
JC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\Models\User.cs
	namespace 	
AecciWeb
 
. 
Models 
{ 
public 

class 
User 
{ 
[ 	
Key	 
] 
public		 
int		 
Id		 
{		 
get		 
;		 
set		  
;		  !
}		" #
[ 	
Required	 
] 
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
PasswordHash "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
string3 9
.9 :
Empty: ?
;? @
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
DateTime2 :
.: ;
UtcNow; A
;A B
} 
} ß
QC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\Models\StoreStatus.cs
	namespace 	
AecciWeb
 
. 
Models 
{ 
public 

class 
StoreStatus 
{ 
[ 	
Key	 
] 
public		 
int		 
Id		 
{		 
get		 
;		 
set		  
;		  !
}		" #
[ 	
Required	 
] 
public 
bool 
IsOpen 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ã
MC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\Models\Product.cs
	namespace 	
AecciWeb
 
. 
Models 
{ 
public 

class 
Product 
{ 
[ 	
Key	 
] 
public		 
int		 
Id		 
{		 
get		 
;		 
set		  
;		  !
}		" #
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
, 
MinimumLength (
=) *
$num+ ,
), -
]- .
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
string2 8
.8 9
Empty9 >
;> ?
[ 	
Required	 
] 
[ 	
Range	 
( 
$num 
, 
$num 
) 
] 
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
Required	 
] 
[ 	
Range	 
( 
$num 
, 
int 
. 
MaxValue 
) 
]  
public 
int 
Quantity 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
? 
ImageUrl 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} ∏
ZC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\Models\ApplicationDbContext.cs
	namespace 	
AecciWeb
 
. 
Models 
{ 
public 

class  
ApplicationDbContext %
:& '
	DbContext( 1
{ 
public  
ApplicationDbContext #
(# $
DbContextOptions$ 4
<4 5 
ApplicationDbContext5 I
>I J
optionsK R
)R S
: 
base 
( 
options 
) 
{		 	
}

 	
public 
DbSet 
< 
Product 
> 
Products &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DbSet 
< 
Announcement !
>! "
Announcements# 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
DbSet 
< 
User 
> 
Users  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
StoreStatus  
>  !
StoreStatus" -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
modelBuilder 
. 
Entity 
<  
Product  '
>' (
(( )
)) *
. 
Property 
( 
p 
=> 
p  
.  !
Price! &
)& '
. 
HasPrecision 
( 
$num  
,  !
$num" #
)# $
;$ %
modelBuilder 
. 
Entity 
<  
Announcement  ,
>, -
(- .
entity. 4
=>5 7
{ 
entity 
. 
Property 
(  
e  !
=>" $
e% &
.& '
PublishedDate' 4
)4 5
. 
ValueGeneratedOnAdd *
(* +
)+ ,
;, -
}   
)   
;   
}!! 	
}"" 
}## ‚
RC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\Models\Announcement.cs
	namespace 	
AecciWeb
 
. 
Models 
{ 
public 

class 
Announcement 
{ 
[ 	
Key	 
] 
public		 
int		 
Id		 
{		 
get		 
;		 
set		  
;		  !
}		" #
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
, 
MinimumLength (
=) *
$num+ ,
), -
]- .
public 
string 
Title 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
Body 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
[ 	
Required	 
] 
public 
bool 
IsUp 
{ 
get 
; 
set  #
;# $
}% &
=' (
true) -
;- .
public 
DateTime 
PublishedDate %
{% &
get& )
;) *
set+ .
;. /
}/ 0
} 
} §
LC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\DTOs\TokenDto.cs
	namespace 	
AecciWeb
 
. 
DTOs 
{ 
public 

class 
TokenResponseDto !
{ 
public 
string 
Token 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public 
DateTime 

Expiration "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} ∆
RC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\DTOs\StoreStatusDTO.cs
	namespace 	
AecciWeb
 
. 
DTOs 
{ 
public 

class 
StoreStatusDto 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
bool 
IsOpen 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ‹	
TC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\DTOs\ProductUpdateDto.cs
	namespace 	
AecciWeb
 
. 
DTOs 
{ 
public 

class 
ProductUpdateDto !
{ 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
string2 8
.8 9
Empty9 >
;> ?
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
Quantity 
{ 
get !
;! "
set# &
;& '
}( )
public		 
string		 
?		 
ImageUrl		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
}

 
} Î

RC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\DTOs\ProductReadDto.cs
	namespace 	
AecciWeb
 
. 
DTOs 
{ 
public 

class 
ProductReadDto 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
string2 8
.8 9
Empty9 >
;> ?
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
int		 
Quantity		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public

 
string

 
?

 
ImageUrl

 
{

  !
get

" %
;

% &
set

' *
;

* +
}

, -
} 
} ‹	
TC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\DTOs\ProductCreateDto.cs
	namespace 	
AecciWeb
 
. 
DTOs 
{ 
public 

class 
ProductCreateDto !
{ 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
string2 8
.8 9
Empty9 >
;> ?
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
Quantity 
{ 
get !
;! "
set# &
;& '
}( )
public		 
string		 
?		 
ImageUrl		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
}

 
} °
LC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\DTOs\LoginDto.cs
	namespace 	
AecciWeb
 
. 
DTOs 
{ 
public 

class 
LoginDto 
{ 
[ 	
Required	 
] 
[ 	
	MaxLength	 
( 
$num 
) 
] 
public		 
string		 
Username		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
=		- .
string		/ 5
.		5 6
Empty		6 ;
;		; <
[ 	
Required	 
] 
[ 	
	MinLength	 
( 
$num 
) 
] 
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
} 
} æ
RC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\DTOs\ImageUploadDto.cs
	namespace 	
AecciWeb
 
. 
DTOs 
{ 
public 

class 
ImageUploadDto 
{ 
public 
int 
OwnerId 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
	OwnerType 
{  !
get" %
;% &
set' *
;* +
}, -
=. /
string0 6
.6 7
Empty7 <
;< =
public 
List 
< 
	IFormFile 
> 
Images %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
new6 9
(9 :
): ;
;; <
} 
}		 à	
YC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\DTOs\AnnouncementUpdateDto.cs
	namespace 	
AecciWeb
 
. 
DTOs 
{ 
public 

class !
AnnouncementUpdateDto &
{ 
public 
string 
Title 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public 
string 
Body 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
bool 
IsUp 
{ 
get 
; 
set  #
;# $
}% &
}		 
}

 …
WC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\DTOs\AnnouncementReadDto.cs
	namespace 	
AecciWeb
 
. 
DTOs 
{ 
public 

class 
AnnouncementReadDto $
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Title 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public 
string 
Body 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public		 
bool		 
IsUp		 
{		 
get		 
;		 
set		  #
;		# $
}		% &
public

 
DateTime

 
?

 
PublishedDate

 &
{

' (
get

( +
;

+ ,
set

- 0
;

0 1
}

1 2
} 
} ∏	
YC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\DTOs\AnnouncementCreateDto.cs
	namespace 	
AecciWeb
 
. 
DTOs 
{ 
public 

class !
AnnouncementCreateDto &
{ 
public 
string 
Title 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public 
string 
Body 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
bool 
IsUp 
{ 
get 
; 
set  #
;# $
}% &
=' (
true) -
;- .
}		 
}

 ∫
`C:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\Controllers\StoreStatusController.cs
	namespace 	
AecciWeb
 
. 
Controllers 
{ 
[ 
ApiController 
] 
[		 
Route		 

(		
 
$str		 
)		 
]		 
public

 

class

 !
StoreStatusController

 &
:

' (
ControllerBase

) 7
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public !
StoreStatusController $
($ % 
ApplicationDbContext% 9
context: A
)A B
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
StoreStatusDto' 5
>5 6
>6 7
	GetStatus8 A
(A B
)B C
{ 	
var 
status 
= 
await 
_context '
.' (
StoreStatus( 3
.3 4
AsNoTracking4 @
(@ A
)A B
.B C
OrderByDescendingC T
(T U
sU V
=>W Y
sZ [
.[ \
Id\ ^
)^ _
._ `
FirstOrDefaultAsync` s
(s t
)t u
;u v
if 
( 
status 
== 
null 
) 
return 
NotFound 
(  
)  !
;! "
return 
new 
StoreStatusDto %
{& '
Id 
= 
status 
. 
Id 
, 
IsOpen 
= 
status 
.  
IsOpen  &
,& '
} 
; 
} 	
["" 	
HttpPut""	 
]"" 
public## 
async## 
Task## 
<## 
IActionResult## '
>##' (
UpdateStatus##) 5
(##5 6
[##6 7
FromBody##7 ?
]##? @
StoreStatusDto##A O
dto##P S
)##S T
{$$ 	
if%% 
(%% 
!%% 

ModelState%% 
.%% 
IsValid%% #
)%%# $
return&& 

BadRequest&& !
(&&! "

ModelState&&" ,
)&&, -
;&&- .
var(( 
existing(( 
=(( 
await((  
_context((! )
.(() *
StoreStatus((* 5
.((5 6
	FindAsync((6 ?
(((? @
dto((@ C
.((C D
Id((D F
)((F G
;((G H
if)) 
()) 
existing)) 
==)) 
null))  
)))  !
return** 
NotFound** 
(**  
)**  !
;**! "
existing,, 
.,, 
IsOpen,, 
=,, 
dto,, !
.,,! "
IsOpen,," (
;,,( )
await.. 
_context.. 
... 
SaveChangesAsync.. +
(..+ ,
).., -
;..- .
return// 
	NoContent// 
(// 
)// 
;// 
}00 	
}11 
}22 Ãc
\C:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\Controllers\ProductController.cs
	namespace 	
AecciWeb
 
. 
Controllers 
{ 
[ 
ApiController 
] 
[		 
Route		 

(		
 
$str		 
)		 
]		 
public

 

class

 
ProductsController

 #
:

$ %
ControllerBase

& 4
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public 
ProductsController !
(! " 
ApplicationDbContext" 6
context7 >
)> ?
=>@ B
_contextC K
=L M
contextN U
;U V
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
ProductReadDto3 A
>A B
>B C
>C D
GetAllProductsE S
(S T
)T U
{ 	
try 
{ 
var 
products 
= 
await $
_context% -
.- .
Products. 6
.- .
AsNoTracking. :
(: ;
); <
.- .
ToListAsync. 9
(9 :
): ;
;; <
var 
result 
= 
products %
. 
Select 
( 
p 
=>  
new! $
ProductReadDto% 3
{ 
Id 
=$ %
p& '
.' (
Id( *
,* +
Name 
=$ %
p& '
.' (
Name( ,
,, -
Description #
=$ %
p& '
.' (
Description( 3
,3 4
Price 
=$ %
p& '
.' (
Price( -
,- .
Quantity  
=$ %
p& '
.' (
Quantity( 0
,0 1
ImageUrl    
=  $ %
p  & '
.  ' (
ImageUrl  ( 0
}!! 
)!! 
."" 
ToList"" 
("" 
)"" 
;"" 
return$$ 
Ok$$ 
($$ 
result$$  
)$$  !
;$$! "
}%% 
catch&& 
(&& 
	Exception&& 
ex&& 
)&&  
{'' 
return(( 

StatusCode(( !
(((! "
$num((" %
,((% &
$"((' )
$str(() M
{((M N
ex((N P
.((P Q
Message((Q X
}((X Y
"((Y Z
)((Z [
;(([ \
})) 
}** 	
[,, 	
HttpGet,,	 
(,, 
$str,, 
),, 
],, 
public-- 
async-- 
Task-- 
<-- 
ActionResult-- &
<--& '
ProductReadDto--' 5
>--5 6
>--6 7
GetProductById--8 F
(--F G
int--G J
id--K M
)--M N
{.. 	
var// 
p// 
=// 
await// 
_context// "
.//" #
Products//# +
.//+ ,
AsNoTracking//, 8
(//8 9
)//9 :
.//: ;
FirstOrDefaultAsync//; N
(//N O
x//O P
=>//Q S
x//T U
.//U V
Id//V X
==//Y [
id//\ ^
)//^ _
;//_ `
if00 
(00 
p00 
==00 
null00 
)00 
return11 
NotFound11 
(11  
new11  #
{11$ %
Message11& -
=11. /
$"110 2
$str112 >
{11> ?
id11? A
}11A B
$str11B Q
"11Q R
}11S T
)11T U
;11U V
return33 
Ok33 
(33 
new33 
ProductReadDto33 (
{44 
Id55 
=55 
p55 
.55  
Id55  "
,55" #
Name66 
=66 
p66 
.66  
Name66  $
,66$ %
Description77 
=77 
p77 
.77  
Description77  +
,77+ ,
Price88 
=88 
p88 
.88  
Price88  %
,88% &
Quantity99 
=99 
p99 
.99  
Quantity99  (
,99( )
ImageUrl:: 
=:: 
p:: 
.::  
ImageUrl::  (
};; 
);; 
;;; 
}<< 	
[>> 	
HttpPost>>	 
]>> 
public?? 
async?? 
Task?? 
<?? 
ActionResult?? &
<??& '
ProductReadDto??' 5
>??5 6
>??6 7
CreateProduct??8 E
(??E F
[??F G
FromBody??G O
]??O P
ProductCreateDto??Q a
dto??b e
)??e f
{@@ 	
ifAA 
(AA 
!AA 

ModelStateAA 
.AA 
IsValidAA #
)AA# $
returnBB 

BadRequestBB !
(BB! "

ModelStateBB" ,
)BB, -
;BB- .
varDD 
imageUrlDD 
=DD 
stringDD !
.DD! "
IsNullOrWhiteSpaceDD" 4
(DD4 5
dtoDD5 8
.DD8 9
ImageUrlDD9 A
)DDA B
?EE 
$strEE L
:FF 
dtoFF 
.FF 
ImageUrlFF 
!FF 
;FF  
varHH 

newProductHH 
=HH 
newHH  
ProductHH! (
{II 
NameJJ 
=JJ 
dtoJJ !
.JJ! "
NameJJ" &
,JJ& '
DescriptionKK 
=KK 
dtoKK !
.KK! "
DescriptionKK" -
,KK- .
PriceLL 
=LL 
dtoLL !
.LL! "
PriceLL" '
,LL' (
QuantityMM 
=MM 
dtoMM !
.MM! "
QuantityMM" *
,MM* +
ImageUrlNN 
=NN 
imageUrlNN &
}OO 
;OO 
tryQQ 
{RR 
awaitSS 
_contextSS 
.SS 
ProductsSS '
.SS' (
AddAsyncSS( 0
(SS0 1

newProductSS1 ;
)SS; <
;SS< =
awaitTT 
_contextTT 
.TT 
SaveChangesAsyncTT /
(TT/ 0
)TT0 1
;TT1 2
}UU 
catchVV 
(VV 
	ExceptionVV 
exVV 
)VV  
{WW 
returnXX 

StatusCodeXX !
(XX! "
$numXX" %
,XX% &
$"XX' )
$strXX) B
{XXB C
exXXC E
.XXE F
MessageXXF M
}XXM N
"XXN O
)XXO P
;XXP Q
}YY 
var[[ 
readDto[[ 
=[[ 
new[[ 
ProductReadDto[[ ,
{\\ 
Id]] 
=]] 

newProduct]] (
.]]( )
Id]]) +
,]]+ ,
Name^^ 
=^^ 

newProduct^^ (
.^^( )
Name^^) -
,^^- .
Description__ 
=__ 

newProduct__ (
.__( )
Description__) 4
,__4 5
Price`` 
=`` 

newProduct`` (
.``( )
Price``) .
,``. /
Quantityaa 
=aa 

newProductaa (
.aa( )
Quantityaa) 1
,aa1 2
ImageUrlbb 
=bb 

newProductbb (
.bb( )
ImageUrlbb) 1
}cc 
;cc 
returnee 
CreatedAtActionee "
(ee" #
nameofee# )
(ee) *
GetProductByIdee* 8
)ee8 9
,ee9 :
newff# &
{ff' (
idff) +
=ff, -

newProductff. 8
.ff8 9
Idff9 ;
}ff< =
,ff= >
readDtogg# *
)gg* +
;gg+ ,
}hh 	
[jj 	
HttpPutjj	 
(jj 
$strjj 
)jj 
]jj 
publickk 
asynckk 
Taskkk 
<kk 
IActionResultkk '
>kk' (
UpdateProductkk) 6
(kk6 7
intkk7 :
idkk; =
,kk= >
[kk? @
FromBodykk@ H
]kkH I
ProductUpdateDtokkJ Z
dtokk[ ^
)kk^ _
{ll 	
ifmm 
(mm 
!mm 

ModelStatemm 
.mm 
IsValidmm #
)mm# $
returnnn 

BadRequestnn !
(nn! "

ModelStatenn" ,
)nn, -
;nn- .
varpp 
existingpp 
=pp 
awaitpp  
_contextpp! )
.pp) *
Productspp* 2
.pp2 3
	FindAsyncpp3 <
(pp< =
idpp= ?
)pp? @
;pp@ A
ifqq 
(qq 
existingqq 
==qq 
nullqq  
)qq  !
returnrr 
NotFoundrr 
(rr  
newrr  #
{rr$ %
Messagerr& -
=rr. /
$"rr0 2
$strrr2 >
{rr> ?
idrr? A
}rrA B
$strrrB Q
"rrQ R
}rrS T
)rrT U
;rrU V
existingtt 
.tt 
Namett 
=tt! "
dtott# &
.tt& '
Namett' +
;tt+ ,
existinguu 
.uu 
Descriptionuu  
=uu! "
dtouu# &
.uu& '
Descriptionuu' 2
;uu2 3
existingvv 
.vv 
Pricevv 
=vv! "
dtovv# &
.vv& '
Pricevv' ,
;vv, -
existingww 
.ww 
Quantityww 
=ww! "
dtoww# &
.ww& '
Quantityww' /
;ww/ 0
existingxx 
.xx 
ImageUrlxx 
=xx! "
stringxx# )
.xx) *
IsNullOrWhiteSpacexx* <
(xx< =
dtoxx= @
.xx@ A
ImageUrlxxA I
)xxI J
?yy# $
existingyy% -
.yy- .
ImageUrlyy. 6
:zz# $
dtozz% (
.zz( )
ImageUrlzz) 1
!zz1 2
;zz2 3
try|| 
{}} 
await~~ 
_context~~ 
.~~ 
SaveChangesAsync~~ /
(~~/ 0
)~~0 1
;~~1 2
} 
catch
ÄÄ 
(
ÄÄ 
	Exception
ÄÄ 
ex
ÄÄ 
)
ÄÄ  
{
ÅÅ 
return
ÇÇ 

StatusCode
ÇÇ !
(
ÇÇ! "
$num
ÇÇ" %
,
ÇÇ% &
$"
ÇÇ' )
$str
ÇÇ) G
{
ÇÇG H
ex
ÇÇH J
.
ÇÇJ K
Message
ÇÇK R
}
ÇÇR S
"
ÇÇS T
)
ÇÇT U
;
ÇÇU V
}
ÉÉ 
return
ÖÖ 
	NoContent
ÖÖ 
(
ÖÖ 
)
ÖÖ 
;
ÖÖ 
}
ÜÜ 	
[
àà 	

HttpDelete
àà	 
(
àà 
$str
àà 
)
àà 
]
àà  
public
ââ 
async
ââ 
Task
ââ 
<
ââ 
IActionResult
ââ '
>
ââ' (
DeleteProduct
ââ) 6
(
ââ6 7
int
ââ7 :
id
ââ; =
)
ââ= >
{
ää 	
var
ãã 
existing
ãã 
=
ãã 
await
ãã  
_context
ãã! )
.
ãã) *
Products
ãã* 2
.
ãã2 3
	FindAsync
ãã3 <
(
ãã< =
id
ãã= ?
)
ãã? @
;
ãã@ A
if
åå 
(
åå 
existing
åå 
==
åå 
null
åå  
)
åå  !
return
çç 
NotFound
çç 
(
çç  
new
çç  #
{
çç$ %
Message
çç& -
=
çç. /
$"
çç0 2
$str
çç2 >
{
çç> ?
id
çç? A
}
ççA B
$str
ççB Q
"
ççQ R
}
ççS T
)
ççT U
;
ççU V
_context
èè 
.
èè 
Products
èè 
.
èè 
Remove
èè $
(
èè$ %
existing
èè% -
)
èè- .
;
èè. /
await
êê 
_context
êê 
.
êê 
SaveChangesAsync
êê +
(
êê+ ,
)
êê, -
;
êê- .
return
ëë 
	NoContent
ëë 
(
ëë 
)
ëë 
;
ëë 
}
íí 	
}
ìì 
}îî •,
^C:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\Controllers\ImageFileController.cs
	namespace 	
AecciWeb
 
. 
Controllers 
{ 
public		 

class		 
ImageUploadDto		 
{

 
public 
int 
OwnerId 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
	OwnerType 
{  !
get" %
;% &
set' *
;* +
}, -
=. /
string0 6
.6 7
Empty7 <
;< =
public 
List 
< 
	IFormFile 
> 
? 
Images  &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
ImageFileController $
:% &
ControllerBase' 5
{ 
private 
readonly 
IWebHostEnvironment ,
_env- 1
;1 2
public 
ImageFileController "
(" #
IWebHostEnvironment# 6
env7 :
): ;
=>< >
_env? C
=D E
envF I
;I J
[ 	
HttpPost	 
( 
$str 
) 
] 
[ 	#
DisableRequestSizeLimit	  
]  !
public 
async 
Task 
< 
IActionResult '
>' (
Upload) /
(/ 0
[0 1
FromForm1 9
]9 :
ImageUploadDto; I
dtoJ M
)M N
{ 	
if 
( 
dto 
. 
Images 
== 
null "
||# %
!& '
dto' *
.* +
Images+ 1
.1 2
Any2 5
(5 6
)6 7
)7 8
return 

BadRequest !
(! "
$str" <
)< =
;= >
try 
{ 
var!! 
webRoot!! 
=!! 
_env!! "
.!!" #
WebRootPath!!# .
;!!. /
if"" 
("" 
string"" 
."" 
IsNullOrEmpty"" (
(""( )
webRoot"") 0
)""0 1
)""1 2
{## 
webRoot$$ 
=$$ 
Path$$ "
.$$" #
Combine$$# *
($$* +
_env$$+ /
.$$/ 0
ContentRootPath$$0 ?
,$$? @
$str$$A J
)$$J K
;$$K L
}%% 
var'' 

uploadsDir'' 
=''  
Path''! %
.''% &
Combine''& -
(''- .
webRoot''. 5
,''5 6
$str''7 @
)''@ A
;''A B
if(( 
((( 
!(( 
	Directory(( 
.(( 
Exists(( %
(((% &

uploadsDir((& 0
)((0 1
)((1 2
	Directory)) 
.)) 
CreateDirectory)) -
())- .

uploadsDir)). 8
)))8 9
;))9 :
var++ 
urls++ 
=++ 
new++ 
List++ #
<++# $
string++$ *
>++* +
(+++ ,
)++, -
;++- .
foreach,, 
(,, 
var,, 
file,, !
in,," $
dto,,% (
.,,( )
Images,,) /
),,/ 0
{-- 
var.. 
ext.. 
=..! "
Path..# '
...' (
GetExtension..( 4
(..4 5
file..5 9
...9 :
FileName..: B
)..B C
;..C D
var// 
name// 
=//! "
$"//# %
{//% &
Guid//& *
.//* +
NewGuid//+ 2
(//2 3
)//3 4
}//4 5
{//5 6
ext//6 9
}//9 :
"//: ;
;//; <
var00 
fullPath00  
=00! "
Path00# '
.00' (
Combine00( /
(00/ 0

uploadsDir000 :
,00: ;
name00< @
)00@ A
;00A B
using22 
var22 
stream22 $
=22% &
System22' -
.22- .
IO22. 0
.220 1
File221 5
.225 6
Create226 <
(22< =
fullPath22= E
)22E F
;22F G
await33 
file33 
.33 
CopyToAsync33 *
(33* +
stream33+ 1
)331 2
;332 3
urls55 
.55 
Add55 
(55 
$"55 
$str55 (
{55( )
name55) -
}55- .
"55. /
)55/ 0
;550 1
}66 
return88 
Ok88 
(88 
new88 
{88 
Urls88  $
=88% &
urls88' +
}88, -
)88- .
;88. /
}99 
catch:: 
(:: 
	Exception:: 
ex:: 
)::  
{;; 
return== 

StatusCode== !
(==! "
$num==" %
,==% &
$"==' )
$str==) B
{==B C
ex==C E
.==E F
Message==F M
}==M N
"==N O
)==O P
;==P Q
}>> 
}?? 	
}@@ 
}AA ü1
YC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\Controllers\AuthController.cs
	namespace 	
AecciWeb
 
. 
Controllers 
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
AuthController 
:  !
ControllerBase" 0
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
private 
readonly 
IConfiguration '
_config( /
;/ 0
public 
AuthController 
(  
ApplicationDbContext 2
context3 :
,: ;
IConfiguration< J
configK Q
)Q R
{ 	
_context 
= 
context 
; 
_config 
= 
config 
; 
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
TokenResponseDto' 7
>7 8
>8 9
Login: ?
(? @
[@ A
FromBodyA I
]I J
LoginDtoK S
dtoT W
)W X
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
return 

BadRequest !
(! "

ModelState" ,
), -
;- .
var   
user   
=   
await   
_context   %
.  % &
Users  & +
.!! 
AsNoTracking!! 
(!! 
)!! 
."" 
FirstOrDefaultAsync"" $
(""$ %
u""% &
=>""' )
u""* +
.""+ ,
Username"", 4
==""5 7
dto""8 ;
.""; <
Username""< D
)""D E
;""E F
if$$ 
($$ 
user$$ 
==$$ 
null$$ 
)$$ 
return%% 
Unauthorized%% #
(%%# $
$str%%$ G
)%%G H
;%%H I
using'' 
var'' 
sha'' 
='' 
SHA256'' "
.''" #
Create''# )
('') *
)''* +
;''+ ,
var(( 
passwordBytes(( 
=(( 
Encoding((  (
.((( )
UTF8(() -
.((- .
GetBytes((. 6
(((6 7
dto((7 :
.((: ;
Password((; C
)((C D
;((D E
var)) 
computedHash)) 
=)) 
sha)) "
.))" #
ComputeHash))# .
()). /
passwordBytes))/ <
)))< =
;))= >
var** 
computedHashHex** 
=**  !
Convert**" )
.**) *
ToHexString*** 5
(**5 6
computedHash**6 B
)**B C
;**C D
if,, 
(,, 
!,, 
computedHashHex,,  
.,,  !
Equals,,! '
(,,' (
user,,( ,
.,,, -
PasswordHash,,- 9
,,,9 :
StringComparison,,; K
.,,K L
OrdinalIgnoreCase,,L ]
),,] ^
),,^ _
return-- 
Unauthorized-- #
(--# $
$str--$ G
)--G H
;--H I
var// 
jwtSettings// 
=// 
_config// %
.//% &

GetSection//& 0
(//0 1
$str//1 >
)//> ?
;//? @
var00 
	secretKey00 
=00 
Encoding00 $
.00$ %
UTF800% )
.00) *
GetBytes00* 2
(002 3
jwtSettings003 >
[00> ?
$str00? J
]00J K
)00K L
;00L M
var22 
claims22 
=22 
new22 
[22 
]22 
{33 
new44 
Claim44 
(44 #
JwtRegisteredClaimNames44 1
.441 2
Sub442 5
,445 6
user447 ;
.44; <
Username44< D
)44D E
,44E F
new55 
Claim55 
(55 #
JwtRegisteredClaimNames55 1
.551 2
Jti552 5
,555 6
Guid557 ;
.55; <
NewGuid55< C
(55C D
)55D E
.55E F
ToString55F N
(55N O
)55O P
)55P Q
}66 
;66 
var88 
tokenDescriptor88 
=88  !
new88" %
JwtSecurityToken88& 6
(886 7
issuer99 
:99 
jwtSettings99 #
[99# $
$str99$ ,
]99, -
,99- .
audience:: 
::: 
jwtSettings:: %
[::% &
$str::& 0
]::0 1
,::1 2
claims;; 
:;; 
claims;; 
,;; 
expires<< 
:<< 
DateTime<< !
.<<! "
UtcNow<<" (
.<<( )
AddHours<<) 1
(<<1 2
$num<<2 3
)<<3 4
,<<4 5
signingCredentials== "
:==" #
new==$ '
SigningCredentials==( :
(==: ;
new>>  
SymmetricSecurityKey>> ,
(>>, -
	secretKey>>- 6
)>>6 7
,>>7 8
SecurityAlgorithms?? &
.??& '

HmacSha256??' 1
)??1 2
)@@ 
;@@ 
varBB 
tokenStringBB 
=BB 
newBB !#
JwtSecurityTokenHandlerBB" 9
(BB9 :
)BB: ;
.BB; <

WriteTokenBB< F
(BBF G
tokenDescriptorBBG V
)BBV W
;BBW X
returnDD 
OkDD 
(DD 
newDD 
TokenResponseDtoDD *
{EE 
TokenFF 
=FF 
tokenStringFF #
,FF# $

ExpirationGG 
=GG 
tokenDescriptorGG ,
.GG, -
ValidToGG- 4
}HH 
)HH 
;HH 
}II 	
}JJ 
}KK êc
aC:\Users\alepa\OneDrive\Desktop\AEECI_Web\aecci-web\backend\Controllers\AnnouncementController.cs
	namespace 	
AecciWeb
 
. 
Controllers 
{ 
[		 
ApiController		 
]		 
[

 
Route

 

(


 
$str

 
)

 
]

 
public 

class #
AnnouncementsController (
:) *
ControllerBase+ 9
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public #
AnnouncementsController &
(& ' 
ApplicationDbContext' ;
context< C
)C D
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
AnnouncementReadDto3 F
>F G
>G H
>H I"
GetActiveAnnouncementsJ `
(` a
)a b
{ 	
var 
announcements 
= 
await  %
_context& .
.. /
Announcements/ <
. 
AsNoTracking 
( 
) 
. 
Where 
( 
a 
=> 
a 
. 
IsUp "
)" #
. 
ToListAsync 
( 
) 
; 
var 
result 
= 
announcements &
.& '
Select' -
(- .
a. /
=>0 2
new3 6
AnnouncementReadDto7 J
{ 
Id 
= 
a 
. 
Id 
, 
Title 
= 
a 
. 
Title 
,  
Body   
=   
a   
.   
Body   
,   
ImageUrl!! 
=!! 
a!! 
.!! 
ImageUrl!! %
,!!% &
IsUp"" 
="" 
a"" 
."" 
IsUp"" 
,"" 
PublishedDate## 
=## 
a##  !
.##! "
PublishedDate##" /
}$$ 
)$$ 
;$$ 
return&& 
Ok&& 
(&& 
result&& 
)&& 
;&& 
}'' 	
[)) 	
HttpGet))	 
])) 
public** 
async** 
Task** 
<** 
ActionResult** &
<**& '
IEnumerable**' 2
<**2 3
AnnouncementReadDto**3 F
>**F G
>**G H
>**H I
GetAllAnnouncements**J ]
(**] ^
)**^ _
{++ 	
var,, 
announcements,, 
=,, 
await,,  %
_context,,& .
.,,. /
Announcements,,/ <
.-- 
AsNoTracking-- 
(-- 
)-- 
... 
ToListAsync.. 
(.. 
).. 
;.. 
var00 
result00 
=00 
announcements00 &
.00& '
Select00' -
(00- .
a00. /
=>000 2
new003 6
AnnouncementReadDto007 J
{11 
Id22 
=22 
a22 
.22 
Id22 
,22 
Title33 
=33 
a33 
.33 
Title33 
,33  
Body44 
=44 
a44 
.44 
Body44 
,44 
ImageUrl55 
=55 
a55 
.55 
ImageUrl55 %
,55% &
IsUp66 
=66 
a66 
.66 
IsUp66 
,66 
PublishedDate77 
=77 
a77  !
.77! "
PublishedDate77" /
}88 
)88 
;88 
return:: 
Ok:: 
(:: 
result:: 
):: 
;:: 
};; 	
[== 	
HttpGet==	 
(== 
$str== 
)== 
]== 
public>> 
async>> 
Task>> 
<>> 
ActionResult>> &
<>>& '
AnnouncementReadDto>>' :
>>>: ;
>>>; <
GetAnnouncementById>>= P
(>>P Q
int>>Q T
id>>U W
)>>W X
{?? 	
var@@ 
announcement@@ 
=@@ 
await@@ $
_context@@% -
.@@- .
Announcements@@. ;
.AA 
AsNoTrackingAA 
(AA 
)AA 
.BB 
FirstOrDefaultAsyncBB $
(BB$ %
aBB% &
=>BB' )
aBB* +
.BB+ ,
IdBB, .
==BB/ 1
idBB2 4
)BB4 5
;BB5 6
ifDD 
(DD 
announcementDD 
==DD 
nullDD  $
)DD$ %
{EE 
returnFF 
NotFoundFF 
(FF  
newFF  #
{FF$ %
MessageFF& -
=FF. /
$"FF0 2
$strFF2 A
{FFA B
idFFB D
}FFD E
$strFFE T
"FFT U
}FFV W
)FFW X
;FFX Y
}GG 
varII 
readDtoII 
=II 
newII 
AnnouncementReadDtoII 1
{JJ 
IdKK 
=KK 
announcementKK !
.KK! "
IdKK" $
,KK$ %
TitleLL 
=LL 
announcementLL $
.LL$ %
TitleLL% *
,LL* +
BodyMM 
=MM 
announcementMM #
.MM# $
BodyMM$ (
,MM( )
ImageUrlNN 
=NN 
announcementNN '
.NN' (
ImageUrlNN( 0
,NN0 1
PublishedDateOO 
=OO 
announcementOO  ,
.OO, -
PublishedDateOO- :
}PP 
;PP 
returnRR 
OkRR 
(RR 
readDtoRR 
)RR 
;RR 
}SS 	
[UU 	
HttpPostUU	 
]UU 
publicVV 
asyncVV 
TaskVV 
<VV 
ActionResultVV &
<VV& '
AnnouncementReadDtoVV' :
>VV: ;
>VV; <
CreateAnnouncementVV= O
(VVO P
[VVP Q
FromBodyVVQ Y
]VVY Z!
AnnouncementCreateDtoVV[ p
dtoVVq t
)VVt u
{WW 	
ifXX 
(XX 
!XX 

ModelStateXX 
.XX 
IsValidXX #
)XX# $
{YY 
returnZZ 

BadRequestZZ !
(ZZ! "

ModelStateZZ" ,
)ZZ, -
;ZZ- .
}[[ 
var]] 
newAnnouncement]] 
=]]  !
new]]" %
Announcement]]& 2
{^^ 
Title__ 
=__ 
dto__ 
.__ 
Title__ !
,__! "
Body`` 
=`` 
dto`` 
.`` 
Body`` 
,``  
ImageUrlaa 
=aa 
dtoaa 
.aa 
ImageUrlaa '
,aa' (
IsUpbb 
=bb 
truebb 
}cc 
;cc 
awaitee 
_contextee 
.ee 
Announcementsee (
.ee( )
AddAsyncee) 1
(ee1 2
newAnnouncementee2 A
)eeA B
;eeB C
awaitff 
_contextff 
.ff 
SaveChangesAsyncff +
(ff+ ,
)ff, -
;ff- .
varhh 
readDtohh 
=hh 
newhh 
AnnouncementReadDtohh 1
{ii 
Idjj 
=jj 
newAnnouncementjj $
.jj$ %
Idjj% '
,jj' (
Titlekk 
=kk 
newAnnouncementkk '
.kk' (
Titlekk( -
,kk- .
Bodyll 
=ll 
newAnnouncementll &
.ll& '
Bodyll' +
,ll+ ,
ImageUrlmm 
=mm 
newAnnouncementmm *
.mm* +
ImageUrlmm+ 3
}nn 
;nn 
returnpp 
CreatedAtActionpp "
(pp" #
nameofpp# )
(pp) *
GetAnnouncementByIdpp* =
)pp= >
,pp> ?
newpp@ C
{ppD E
idppF H
=ppI J
newAnnouncementppK Z
.ppZ [
Idpp[ ]
}pp^ _
,pp_ `
readDtoppa h
)pph i
;ppi j
}qq 	
[ss 	
HttpPutss	 
(ss 
$strss 
)ss 
]ss 
publictt 
asynctt 
Tasktt 
<tt 
IActionResulttt '
>tt' (
UpdateAnnouncementtt) ;
(tt; <
inttt< ?
idtt@ B
,ttB C
[ttD E
FromBodyttE M
]ttM N!
AnnouncementUpdateDtottO d
dtotte h
)tth i
{uu 	
ifvv 
(vv 
!vv 

ModelStatevv 
.vv 
IsValidvv #
)vv# $
{ww 
returnxx 

BadRequestxx !
(xx! "

ModelStatexx" ,
)xx, -
;xx- .
}yy 
var{{  
existingAnnouncement{{ $
={{% &
await{{' ,
_context{{- 5
.{{5 6
Announcements{{6 C
.{{C D
	FindAsync{{D M
({{M N
id{{N P
){{P Q
;{{Q R
if|| 
(||  
existingAnnouncement|| $
==||% '
null||( ,
)||, -
{}} 
return~~ 
NotFound~~ 
(~~  
new~~  #
{~~$ %
Message~~& -
=~~. /
$"~~0 2
$str~~2 A
{~~A B
id~~B D
}~~D E
$str~~E T
"~~T U
}~~V W
)~~W X
;~~X Y
} "
existingAnnouncement
ÅÅ  
.
ÅÅ  !
Title
ÅÅ! &
=
ÅÅ' (
dto
ÅÅ) ,
.
ÅÅ, -
Title
ÅÅ- 2
;
ÅÅ2 3"
existingAnnouncement
ÇÇ  
.
ÇÇ  !
Body
ÇÇ! %
=
ÇÇ& '
dto
ÇÇ( +
.
ÇÇ+ ,
Body
ÇÇ, 0
;
ÇÇ0 1"
existingAnnouncement
ÉÉ  
.
ÉÉ  !
ImageUrl
ÉÉ! )
=
ÉÉ* +
dto
ÉÉ, /
.
ÉÉ/ 0
ImageUrl
ÉÉ0 8
;
ÉÉ8 9"
existingAnnouncement
ÑÑ  
.
ÑÑ  !
IsUp
ÑÑ! %
=
ÑÑ& '
dto
ÑÑ( +
.
ÑÑ+ ,
IsUp
ÑÑ, 0
;
ÑÑ0 1
await
ÜÜ 
_context
ÜÜ 
.
ÜÜ 
SaveChangesAsync
ÜÜ +
(
ÜÜ+ ,
)
ÜÜ, -
;
ÜÜ- .
return
àà 
	NoContent
àà 
(
àà 
)
àà 
;
àà 
}
ââ 	
[
ãã 	

HttpDelete
ãã	 
(
ãã 
$str
ãã 
)
ãã 
]
ãã  
public
åå 
async
åå 
Task
åå 
<
åå 
IActionResult
åå '
>
åå' ( 
DeleteAnnouncement
åå) ;
(
åå; <
int
åå< ?
id
åå@ B
)
ååB C
{
çç 	
var
éé "
existingAnnouncement
éé $
=
éé% &
await
éé' ,
_context
éé- 5
.
éé5 6
Announcements
éé6 C
.
ééC D
	FindAsync
ééD M
(
ééM N
id
ééN P
)
ééP Q
;
ééQ R
if
èè 
(
èè "
existingAnnouncement
èè $
==
èè% '
null
èè( ,
)
èè, -
{
êê 
return
ëë 
NotFound
ëë 
(
ëë  
new
ëë  #
{
ëë$ %
Message
ëë& -
=
ëë. /
$"
ëë0 2
$str
ëë2 F
{
ëëF G
id
ëëG I
}
ëëI J
$str
ëëJ Y
"
ëëY Z
}
ëë[ \
)
ëë\ ]
;
ëë] ^
}
íí 
_context
îî 
.
îî 
Announcements
îî "
.
îî" #
Remove
îî# )
(
îî) *"
existingAnnouncement
îî* >
)
îî> ?
;
îî? @
await
ïï 
_context
ïï 
.
ïï 
SaveChangesAsync
ïï +
(
ïï+ ,
)
ïï, -
;
ïï- .
return
óó 
	NoContent
óó 
(
óó 
)
óó 
;
óó 
}
òò 	
}
ôô 
}öö 